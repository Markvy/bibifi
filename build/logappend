#!/usr/bin/python
from sys import argv
def append():
  room = None
  i = 0
  while i < len(argv) - 2:
    i += 1
    cur, nxt = argv[i:i+2]
    if cur == '-K':
      token = nxt
      i += 1
    elif cur == '-T':
      timestamp = nxt
      i += 1
    elif cur in ('-E','-G'):
      eg = cur
      name = nxt
      i += 1
    elif cur == '-R':
      room = nxt
      i += 1
    else:
      assert argv[i] in ('-A','-L')
      al = argv[i]
  log = argv[-1]
  assert log.isalnum()
  print >> open(log, 'a'), timestamp, al, eg, name, room

if argv[1] != '-B': append()
else:
  for line in open(argv[2]):
    argv[1:] = line.split()
    append()
